-- Create database CREATE DATABASE IF NOT EXISTS jewellery_erp; USE jewellery_erp;

-- Users table CREATE TABLE users ( id INT(11) AUTO_INCREMENT PRIMARY KEY, username VARCHAR(100) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, role ENUM('admin','employee','customer') NOT NULL );

-- Inventory table CREATE TABLE inventory ( id INT(11) AUTO_INCREMENT PRIMARY KEY, image LONGBLOB, name VARCHAR(100) NOT NULL, type VARCHAR(50), quantity INT(11) NOT NULL, price DECIMAL(10,2) NOT NULL, description TEXT, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, employee_id INT(11), FOREIGN KEY (employee_id) REFERENCES users(id) );

-- Orders table CREATE TABLE orders ( id INT(11) AUTO_INCREMENT PRIMARY KEY, user_id INT(11) NOT NULL, order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, total DECIMAL(10,2) NOT NULL, FOREIGN KEY (user_id) REFERENCES users(id) );

-- Order Items table CREATE TABLE order_items ( id INT(11) AUTO_INCREMENT PRIMARY KEY, order_id INT(11) NOT NULL, item_id INT(11) NOT NULL, quantity INT(11) NOT NULL, price DECIMAL(10,2) NOT NULL, FOREIGN KEY (order_id) REFERENCES orders(id), FOREIGN KEY (item_id) REFERENCES inventory(id) );

-- Inventory Requests table CREATE TABLE inventory_requests ( id INT(11) AUTO_INCREMENT PRIMARY KEY, employee_id INT(11) NOT NULL, item_name VARCHAR(255) NOT NULL, quantity INT(11) NOT NULL, status ENUM('Pending','Approved','Rejected') DEFAULT 'Pending', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (employee_id) REFERENCES users(id) );

-- Leave Requests table CREATE TABLE leave_requests ( id INT(11) AUTO_INCREMENT PRIMARY KEY, employee_id INT(11) NOT NULL, start_date DATE NOT NULL, end_date DATE NOT NULL, reason TEXT, status ENUM('Pending','Approved','Rejected') DEFAULT 'Pending', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (employee_id) REFERENCES users(id) );

-- Attendance table CREATE TABLE attendance ( id INT(11) AUTO_INCREMENT PRIMARY KEY, employee_id INT(11) NOT NULL, date DATE NOT NULL, status ENUM('Present','Absent','Late','Leave') DEFAULT 'Present', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (employee_id) REFERENCES users(id) );
